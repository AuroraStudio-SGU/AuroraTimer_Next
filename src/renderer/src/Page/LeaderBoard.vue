<template>
  <div class="menu">
    <div
        class="white-box overflow-auto flex-col"
        style="display: flex; align-items: center"
    >
      <div class="flex"><p class="text-4xl mb-8">卷王榜</p></div>
      <div class="flex justify-around w-full h-full items-baseline">
        <div class="flex justify-center items-center flex-col">
          <div class="avatar">
            <div
                class="w-44 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2"
            >
              <img :src="Top3[1].avatar"/>
            </div>
          </div>

          <button class="btn btn-primary flex text-2xl btn-lg mt-6">
            <p>{{ Top3[1].name }}</p>
            <svg
                class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                width="40"
                height="40"
            >
              <path
                  d="M287.762 124.318v252.871c0 123.331 100.905 224.238 224.238 224.238 123.331 0 224.238-100.907 224.238-224.238V124.318H287.762z"
                  fill="#82A0AF"
              ></path>
              <path
                  d="M379.487 124.318v149.434c0 72.882 59.63 132.513 132.513 132.513 72.882 0 132.513-59.631 132.513-132.513V124.318H379.487z"
                  fill="#E0EAED"

              ></path>
              <path
                  d="M644.513 124.318v149.434c0 72.882-59.631 132.514-132.513 132.514-72.884 0-132.514-59.631-132.514-132.514V124.318h265.027m19.201-19.201H360.285v168.635c0 83.656 68.059 151.714 151.715 151.714s151.714-68.059 151.714-151.714V105.117z"
                  fill="#FFFFFF"
              ></path>
              <path
                  d="M512 622.736m-339.055 0a339.055 339.055 0 1 0 678.11 0 339.055 339.055 0 1 0-678.11 0Z"
                  fill="#9EC2F7"
              ></path>
              <path
                  d="M512 622.736m-250.074 0a250.074 250.074 0 1 0 500.148 0 250.074 250.074 0 1 0-500.148 0Z"
                  fill="#DDECF7"
              ></path>
              <path
                  d="M512 372.662c138.112 0 250.074 111.962 250.074 250.074S650.112 872.81 512 872.81c-138.113 0-250.074-111.962-250.074-250.074S373.888 372.662 512 372.662m0-24.001c-151.126 0-274.075 122.95-274.075 274.075S360.874 896.811 512 896.811s274.075-122.95 274.075-274.076S663.126 348.661 512 348.661z"
                  fill="#FFFFFF"
              ></path>
              <path
                  d="M786.015 124.319h-548.03c-17.08 0-31.055-13.975-31.055-31.055s13.975-31.055 31.055-31.055h548.029c17.08 0 31.055 13.975 31.055 31.055 0.001 17.08-13.974 31.055-31.054 31.055z"
                  fill="#231815"
              ></path>
              <path
                  d="M623.478 748.689v42.438h-218.7v-34.684l128.12-130.562c13.599-13.599 23.256-25.839 28.97-36.723 5.71-10.875 8.569-22.576 8.569-35.092 0-17.949-5.241-32.233-15.708-42.836-10.477-10.613-24.685-15.915-42.639-15.915-16.594 0-30.465 4.285-41.617 12.849-11.157 8.569-19.177 20.748-24.071 36.517l-37.947-22.435c7.346-22.576 19.993-39.785 37.947-51.616 17.949-11.832 40.394-17.752 67.32-17.752 20.945 0 39.644 4.285 56.102 12.854 16.454 8.569 29.237 20.542 38.355 35.908 9.108 15.371 13.669 32.711 13.669 52.024 0 18.498-4.631 35.43-13.876 50.796-9.249 15.371-24.343 33.803-45.288 55.287l-86.09 88.944h146.884z"
              ></path>
            </svg>
          </button>
        </div>
        <div class="flex justify-center items-center flex-col">
          <div class="avatar">
            <div
                class="w-60 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2"
            >
              <img :src="Top3[0].avatar"/>
            </div>
          </div>
          <button class="btn btn-secondary flex text-3xl btn-lg mt-6">
            <p>{{ Top3[0].name }}</p>
            <svg
              class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
              width="40"
                height="40"
            >
              <path
                  d="M287.762 124.318v252.871c0 123.331 100.905 224.238 224.238 224.238 123.331 0 224.238-100.907 224.238-224.238V124.318H287.762z"
                  fill="#D81919"
              ></path>
              <path
                  d="M379.487 124.318v149.434c0 72.882 59.63 132.513 132.513 132.513 72.882 0 132.513-59.631 132.513-132.513V124.318H379.487z"
                  fill="#FACC60"
              ></path>
              <path
                  d="M644.513 124.318v149.434c0 72.882-59.631 132.514-132.513 132.514-72.884 0-132.514-59.631-132.514-132.514V124.318h265.027m19.201-19.201H360.285v168.635c0 83.656 68.059 151.714 151.715 151.714s151.714-68.059 151.714-151.714V105.117z"
                  fill="#FFFFFF"
              ></path>
              <path
                  d="M512 622.736m-339.055 0a339.055 339.055 0 1 0 678.11 0 339.055 339.055 0 1 0-678.11 0Z"
                  fill="#F8B643"
              ></path>
              <path
                  d="M512 622.736m-250.074 0a250.074 250.074 0 1 0 500.148 0 250.074 250.074 0 1 0-500.148 0Z"
                  fill="#FFF89F"
              ></path>
              <path
                  d="M512 372.662c138.112 0 250.074 111.962 250.074 250.074S650.112 872.81 512 872.81c-138.113 0-250.074-111.962-250.074-250.074S373.888 372.662 512 372.662m0-24.001c-151.126 0-274.075 122.95-274.075 274.075S360.874 896.811 512 896.811s274.075-122.95 274.075-274.076S663.126 348.661 512 348.661z"
                  fill="#FFFFFF"
              ></path>
              <path
                  d="M786.015 124.319h-548.03c-17.08 0-31.055-13.975-31.055-31.055s13.975-31.055 31.055-31.055h548.029c17.08 0 31.055 13.975 31.055 31.055 0.001 17.08-13.974 31.055-31.054 31.055z"
                  fill="#231815"
              ></path>
              <path
                  d="M556.594 800.727h-51.41V527.763l-68.956 39.578 0.408-51.41 82.827-48.147h37.131v332.943z"
              ></path>
            </svg>
          </button>
        </div>
        <div class="flex justify-center items-center flex-col">
          <div class="avatar">
            <div
                class="w-44 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2"
            >
              <img :src="Top3[2].avatar"/>
            </div>
          </div>
          <button class="btn btn-accent flex text-2xl btn-lg mt-6">
            <p>{{ Top3[2].name }}</p>
            <svg
              class="icon"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
              width="40"
                height="40"
            >
              <path
                  d="M287.762 124.318v252.871c0 123.331 100.905 224.238 224.238 224.238 123.331 0 224.238-100.907 224.238-224.238V124.318H287.762z"
                  fill="#BF4C19"
              ></path>
              <path
                  d="M379.487 124.318v149.434c0 72.882 59.63 132.513 132.513 132.513 72.882 0 132.513-59.631 132.513-132.513V124.318H379.487z"
                  fill="#DC8C57"
              ></path>
              <path
                  d="M644.513 124.318v149.434c0 72.882-59.631 132.514-132.513 132.514-72.884 0-132.514-59.631-132.514-132.514V124.318h265.027m19.201-19.201H360.285v168.635c0 83.656 68.059 151.714 151.715 151.714s151.714-68.059 151.714-151.714V105.117z"
                  fill="#FFFFFF"
              ></path>
              <path
                  d="M512 622.736m-339.055 0a339.055 339.055 0 1 0 678.11 0 339.055 339.055 0 1 0-678.11 0Z"
                  fill="#FCC181"
              ></path>
              <path
                  d="M512 622.736m-250.074 0a250.074 250.074 0 1 0 500.148 0 250.074 250.074 0 1 0-500.148 0Z"
                  fill="#FFE6BF"
              ></path>
              <path
                  d="M512 372.662c138.112 0 250.074 111.962 250.074 250.074S650.112 872.81 512 872.81c-138.113 0-250.074-111.962-250.074-250.074S373.888 372.662 512 372.662m0-24.001c-151.126 0-274.075 122.95-274.075 274.075S360.874 896.811 512 896.811s274.075-122.95 274.075-274.076S663.126 348.661 512 348.661z"
                  fill="#FFFFFF"
              ></path>
              <path
                  d="M786.015 124.319h-548.03c-17.08 0-31.055-13.975-31.055-31.055s13.975-31.055 31.055-31.055h548.029c17.08 0 31.055 13.975 31.055 31.055 0.001 17.08-13.974 31.055-31.054 31.055z"
                  fill="#231815"
              ></path>
              <path
                  d="M627.439 699.539c0 20.677-4.692 39.105-14.077 55.287-9.385 16.187-22.51 28.764-39.372 37.741-16.871 8.977-36.18 13.468-57.94 13.468-25.843 0-48.082-5.916-66.711-17.752-18.634-11.832-31.351-28.079-38.148-48.757l37.947-22.44c5.161 14.687 13.463 26.11 24.887 34.272 11.424 8.161 25.431 12.24 42.025 12.24 18.493 0 33.386-5.916 44.678-17.748 11.283-11.832 16.932-27.264 16.932-46.31 0-19.585-5.649-34.947-16.932-46.104-11.293-11.152-26.725-16.73-46.31-16.73-19.857 0-34.68 6.394-44.472 19.177l-28.97-31.417 108.53-113.836H424.654v-42.846h187.691v34.684l-86.91 91.804c19.585 0.272 37.131 4.894 52.633 13.871 15.507 8.977 27.606 21.423 36.316 37.333 8.7 15.914 13.055 33.938 13.055 54.063z"
              ></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import {onBeforeMount, ref} from "vue";
import {UserTime} from "../api/interfaces/Schema";
import {ElNotification} from "element-plus";
import {getAvatarById, getTop3} from "../api/API";

let empty:UserTime={
  priv: 0, id:'',name: "获取失败", reduceTime: 0, totalTime: 0, unfinishedCount: 0, weekTime: 0,avatar:'',grade:'',workGroup:''
}
let Top3s = [
  empty,empty,empty
]
let Top3 = ref<UserTime[]>(Top3s);

const loadTop3 = async () => {
  let res = await getTop3()
  if (!res.success) {
    ElNotification({
      title: "请求失败！",
      message: res.msg,
      type: "error"
    });
  } else {
    Top3.value = res.data;
    for (let i = 0; i < Top3.value.length; i++) {
      let res = await getAvatarById(Top3.value[i].id)
      if (res.success) {
        Top3.value[i].avatar = res.data + '?' + Math.random();
      }
    }
  }
}

onBeforeMount(async () => {
  await loadTop3()
  // handleChange(globalStore.ThemeList.indexOf(globalStore.currentTheme));
});
</script>

<style scoped>
.svg-item {
  width: 40px;
  height: 40px;
}
</style>
